<!DOCTYPE html>
<html>
<head>
<title>Python Development Environment</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

/* href format */
a {
	text-decoration: none;
	color: #6021c7;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: #6021c7;
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #000000; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<!-- # CILab Workstation Usage -->
<h1 id="cilab-workstation-usage">PYTHON DEVELOPMENT ENVIRONMENT</h1>
<p>created by <a href="mailto:duongnguyen@mme.dongguk.edu">Duong Nguyen</a><br>
last update 2024-03-11</p>

<!-- adding a home button -->
<p><a href="../../index.html">[Home]</a></p>

<p>To use a CILab workstation for research, you need to set up an environment on it first. This document will guide you through the process.</p>

<ol style="list-style-type: decimal">
	<li>Connecting to a CILab workstation</li>
		<ul>
			<li>Open a terminal on your local machine</li>
			<li>Connect to a CILab workstation via SSH with the following command</li>
			<pre>ssh your_username@server_ip -p 1004</pre>
			Here, <code>your_username</code> is your username and <code>server_ip</code> is the IP address of the workstation, and <code>-p 1004</code> provides the port number.
			<li>Enter your password and you will be connected to the workstation</li>
			<li>Let's check if the workstation has GPUs by typing the following command in the terminal</li>
			<pre>nvidia-smi</pre>
			As shown in the figure below, this workstation has 4 GPUs, one of which is being used by another user.
			<p>
				<img src="1.nvidia_smi.png" alt="alt text" width="900"/>
			</p>
		</ul>
	<li>Setting up an environment</li>
		<ul>
			<li>Given a connected terminal to the workstation</li>
			<li>Download Anaconda via <code>wget</code> command in a terminal. For example,</li>
			<pre>wget https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh</pre>
			<li>Then install Anaconda</li>
			<pre>bash Anaconda3-2023.09-0-Linux-x86_64.sh</pre>
			<li>After that, create a new environment via <code>conda</code> command in a terminal</li>
			<pre>conda create -n your_env_name</pre>
			<li>Activate the environment</li>
			<pre>conda activate your_env_name</pre>
			<li>Then, you can install any packages you need. Let's take PyTorch as an example</li>
			<pre>pip install torch torchvision torchaudio</pre>
			Now you are ready to develop your very first project on the workstation!
		</ul>
	<li>Developing on a workstation</li>
		<ul>
			<li>Given a connected terminal to the workstation</li>
			<li>Let's create a new Python file by typing
			<pre>nano test.py</pre>
			then press <code>Enter</code></li>
			<li>Type the following code in the file:</li>
			<pre>import torch
print(torch.cuda.is_available())</pre>
			<li>Save the file by pressing <code>Ctrl+X</code> (Windows/Linux) or <code>control+X</code> (Mac), then press <code>Y</code> and <code>Enter</code></li>
			<li>Run the code by typing the following command in the terminal and press <code>Enter</code></li>
			<pre>CUDA_DEVICE_ORDER="PCI_BUS_ID" CUDA_VISIBLE_DEVICES="0,1" python test.py</pre>
			<blockquote>
				<em>In the command above, <code>CUDA_DEVICE_ORDER="PCI_BUS_ID"</code> and <code>CUDA_VISIBLE_DEVICES="0,1"</code> are important. They tell the system to use GPU #0 and #1 to run the code. Please specify the GPU number you want to use accordingly and you should not choose the ones that are being used by others. In general, only one GPU, e.g., <code>CUDA_VISIBLE_DEVICES="0"</code>, should be enough for most of the tasks.</em>
			</blockquote>
			<p>
				As shown in the figure below, the output is <code>True</code>, which means at least one GPU is available.
			</p>
			<p>
				<img src="2.run.png" alt="alt text" width="900"/>
			</p>

			<blockquote>
				<em>For data storage, a user can access the following directories:</em>
				<ol>
					<li><code>/home/your_username</code>: your home directory</li>
					<li><code>/media/.../your_username</code>: your external hard drive</li>
				</ol>
				<p>For the most part, you should store datasets in the external hard drive while keeping your codes in the home directory.</p>
			</blockquote>
		
			<blockquote>
				<em>Sometimes, you may want to run a program in the background so that you can close the terminal without stopping it. To run a program in the background, use the command below with <code>nohup your_program &amp;</code>. Note that all the outputs will be saved in a file called <code>nohup.out</code> in the current directory. To terminate the program, look for its process ID (PID) via <code>ps -ef | grep test.py</code> and kill it with <code>kill -9 PID</code>.</em>
			</blockquote>
			<pre>CUDA_DEVICE_ORDER="PCI_BUS_ID" CUDA_VISIBLE_DEVICES="1" nohup python test.py &amp;</pre>

		</ul>
</ol>
<!-- adding a home button -->
<p><a href="../../index.html">[Home]</a></p>
<br /><br /><br /><br /><br />
</body>
</html>
